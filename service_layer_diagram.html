<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Layer Package Design</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f8f9fa;
        }
        .diagram-container {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="diagram-container">
        <svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                    <path d="M0,0 L0,6 L9,3 z" fill="#000"/>
                </marker>
                <marker id="hollow-arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                    <path d="M0,0 L0,6 L9,3 z" fill="white" stroke="#000"/>
                </marker>
                <marker id="diamond" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto" markerUnits="strokeWidth">
                    <path d="M0,5 L5,0 L10,5 L5,10 z" fill="white" stroke="#000"/>
                </marker>
            </defs>
            
            <!-- Title -->
            <text x="600" y="30" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">Service Layer Package Design</text>
            
            <!-- Package: com.musicsocial.service -->
            <g>
                <rect x="50" y="60" width="200" height="25" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
                <text x="55" y="77" font-family="Arial" font-size="11" font-weight="bold">com.musicsocial.service</text>
                <rect x="50" y="85" width="200" height="140" fill="#f5f5f5" stroke="#333" stroke-width="1"/>
                
                <text x="60" y="105" font-family="Arial" font-size="10" font-style="italic">&lt;&lt;interface&gt;&gt; UserService</text>
                <text x="60" y="120" font-family="Arial" font-size="10" font-style="italic">&lt;&lt;interface&gt;&gt; TrackService</text>
                <text x="60" y="135" font-family="Arial" font-size="10" font-style="italic">&lt;&lt;interface&gt;&gt; PlaylistService</text>
                <text x="60" y="150" font-family="Arial" font-size="10" font-style="italic">&lt;&lt;interface&gt;&gt; NotificationService</text>
                <text x="60" y="165" font-family="Arial" font-size="10" font-style="italic">&lt;&lt;interface&gt;&gt; RecommendationService</text>
                <text x="60" y="180" font-family="Arial" font-size="10" font-style="italic">&lt;&lt;interface&gt;&gt; ListeningHistoryService</text>
            </g>
            
            <!-- Package: com.musicsocial.service.impl -->
            <g>
                <rect x="300" y="60" width="220" height="25" fill="#e8f5e8" stroke="#388e3c" stroke-width="2"/>
                <text x="305" y="77" font-family="Arial" font-size="11" font-weight="bold">com.musicsocial.service.impl</text>
                <rect x="300" y="85" width="220" height="140" fill="#f5f5f5" stroke="#333" stroke-width="1"/>
                
                <text x="310" y="105" font-family="Arial" font-size="10">UserServiceImpl</text>
                <text x="310" y="120" font-family="Arial" font-size="10">TrackServiceImpl</text>
                <text x="310" y="135" font-family="Arial" font-size="10">PlaylistServiceImpl</text>
                <text x="310" y="150" font-family="Arial" font-size="10">NotificationServiceImpl</text>
                <text x="310" y="165" font-family="Arial" font-size="10">RecommendationServiceImpl</text>
                <text x="310" y="180" font-family="Arial" font-size="10">ListeningHistoryServiceImpl</text>
            </g>
            
            <!-- Package: com.musicsocial.repository -->
            <g>
                <rect x="570" y="60" width="220" height="25" fill="#fff3e0" stroke="#f57c00" stroke-width="2"/>
                <text x="575" y="77" font-family="Arial" font-size="11" font-weight="bold">com.musicsocial.repository</text>
                <rect x="570" y="85" width="220" height="140" fill="#f5f5f5" stroke="#333" stroke-width="1"/>
                
                <text x="580" y="105" font-family="Arial" font-size="10" font-style="italic">&lt;&lt;interface&gt;&gt; UserRepository</text>
                <text x="580" y="120" font-family="Arial" font-size="10" font-style="italic">&lt;&lt;interface&gt;&gt; TrackRepository</text>
                <text x="580" y="135" font-family="Arial" font-size="10" font-style="italic">&lt;&lt;interface&gt;&gt; PlaylistRepository</text>
                <text x="580" y="150" font-family="Arial" font-size="10" font-style="italic">&lt;&lt;interface&gt;&gt; NotificationRepository</text>
                <text x="580" y="165" font-family="Arial" font-size="10" font-style="italic">&lt;&lt;interface&gt;&gt; ListeningHistoryRepository</text>
            </g>
            
            <!-- Package: com.musicsocial.domain -->
            <g>
                <rect x="840" y="60" width="200" height="25" fill="#fce4ec" stroke="#c2185b" stroke-width="2"/>
                <text x="845" y="77" font-family="Arial" font-size="11" font-weight="bold">com.musicsocial.domain</text>
                <rect x="840" y="85" width="200" height="140" fill="#f5f5f5" stroke="#333" stroke-width="1"/>
                
                <text x="850" y="105" font-family="Arial" font-size="10">User</text>
                <text x="850" y="120" font-family="Arial" font-size="10">Track</text>
                <text x="850" y="135" font-family="Arial" font-size="10">Playlist</text>
                <text x="850" y="150" font-family="Arial" font-size="10">Notification</text>
                <text x="850" y="165" font-family="Arial" font-size="10">ListeningHistory</text>
            </g>
            
            <!-- Package: com.musicsocial.mapper -->
            <g>
                <rect x="300" y="260" width="200" height="25" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2"/>
                <text x="305" y="277" font-family="Arial" font-size="11" font-weight="bold">com.musicsocial.mapper</text>
                <rect x="300" y="285" width="200" height="100" fill="#f5f5f5" stroke="#333" stroke-width="1"/>
                
                <text x="310" y="305" font-family="Arial" font-size="10">UserMapper</text>
                <text x="310" y="320" font-family="Arial" font-size="10">TrackMapper</text>
                <text x="310" y="335" font-family="Arial" font-size="10">PlaylistMapper</text>
                <text x="310" y="350" font-family="Arial" font-size="10">NotificationMapper</text>
            </g>
            
            <!-- Package: com.musicsocial.dto -->
            <g>
                <rect x="570" y="260" width="200" height="25" fill="#e0f2f1" stroke="#00695c" stroke-width="2"/>
                <text x="575" y="277" font-family="Arial" font-size="11" font-weight="bold">com.musicsocial.dto</text>
                <rect x="570" y="285" width="200" height="100" fill="#f5f5f5" stroke="#333" stroke-width="1"/>
                
                <text x="580" y="305" font-family="Arial" font-size="10">UserDTO</text>
                <text x="580" y="320" font-family="Arial" font-size="10">TrackDTO</text>
                <text x="580" y="335" font-family="Arial" font-size="10">PlaylistDTO</text>
                <text x="580" y="350" font-family="Arial" font-size="10">NotificationDTO</text>
            </g>
            
            <!-- Implementation relationships (dashed lines with hollow arrows) -->
            <line x1="300" y1="105" x2="250" y2="105" stroke="#000" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#hollow-arrow)"/>
            <line x1="300" y1="120" x2="250" y2="120" stroke="#000" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#hollow-arrow)"/>
            <line x1="300" y1="135" x2="250" y2="135" stroke="#000" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#hollow-arrow)"/>
            <line x1="300" y1="150" x2="250" y2="150" stroke="#000" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#hollow-arrow)"/>
            <line x1="300" y1="165" x2="250" y2="165" stroke="#000" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#hollow-arrow)"/>
            <line x1="300" y1="180" x2="250" y2="180" stroke="#000" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#hollow-arrow)"/>
            
            <!-- Dependency relationships (dashed lines with arrows) -->
            <line x1="520" y1="105" x2="570" y2="105" stroke="#000" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrow)"/>
            <line x1="520" y1="120" x2="570" y2="120" stroke="#000" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrow)"/>
            <line x1="520" y1="135" x2="570" y2="135" stroke="#000" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrow)"/>
            <line x1="520" y1="150" x2="570" y2="150" stroke="#000" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrow)"/>
            <line x1="520" y1="165" x2="570" y2="165" stroke="#000" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrow)"/>
            
            <!-- Service to Mapper dependencies -->
            <line x1="410" y1="225" x2="410" y2="260" stroke="#000" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrow)"/>
            
            <!-- Association relationships (solid lines with arrows) -->
            <line x1="790" y1="105" x2="840" y2="105" stroke="#000" stroke-width="1" marker-end="url(#arrow)"/>
            <line x1="790" y1="120" x2="840" y2="120" stroke="#000" stroke-width="1" marker-end="url(#arrow)"/>
            <line x1="790" y1="135" x2="840" y2="135" stroke="#000" stroke-width="1" marker-end="url(#arrow)"/>
            <line x1="790" y1="150" x2="840" y2="150" stroke="#000" stroke-width="1" marker-end="url(#arrow)"/>
            <line x1="790" y1="165" x2="840" y2="165" stroke="#000" stroke-width="1" marker-end="url(#arrow)"/>
            
            <!-- Mapper to DTO relationships -->
            <line x1="500" y1="305" x2="570" y2="305" stroke="#000" stroke-width="1" marker-end="url(#arrow)"/>
            <line x1="500" y1="320" x2="570" y2="320" stroke="#000" stroke-width="1" marker-end="url(#arrow)"/>
            <line x1="500" y1="335" x2="570" y2="335" stroke="#000" stroke-width="1" marker-end="url(#arrow)"/>
            <line x1="500" y1="350" x2="570" y2="350" stroke="#000" stroke-width="1" marker-end="url(#arrow)"/>
            
            <!-- Mapper to Domain relationships -->
            <line x1="500" y1="305" x2="520" y2="305" stroke="#000" stroke-width="1"/>
            <line x1="520" y1="305" x2="520" y2="105" stroke="#000" stroke-width="1"/>
            <line x1="520" y1="105" x2="840" y2="105" stroke="#000" stroke-width="1" marker-end="url(#arrow)"/>
            
            <!-- Aggregation relationships -->
            <line x1="840" y1="105" x2="820" y2="105" stroke="#000" stroke-width="1"/>
            <line x1="820" y1="105" x2="820" y2="120" stroke="#000" stroke-width="1"/>
            <line x1="820" y1="120" x2="840" y2="120" stroke="#000" stroke-width="1" marker-start="url(#diamond)"/>
            
            <line x1="840" y1="105" x2="800" y2="105" stroke="#000" stroke-width="1"/>
            <line x1="800" y1="105" x2="800" y2="135" stroke="#000" stroke-width="1"/>
            <line x1="800" y1="135" x2="840" y2="135" stroke="#000" stroke-width="1" marker-start="url(#diamond)"/>
            
            <!-- Legend -->
            <g>
                <rect x="50" y="420" width="300" height="180" fill="#ffffff" stroke="#333" stroke-width="1"/>
                <text x="60" y="440" font-family="Arial" font-size="14" font-weight="bold">Legend:</text>
                
                <line x1="60" y1="460" x2="100" y2="460" stroke="#000" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#hollow-arrow)"/>
                <text x="110" y="465" font-family="Arial" font-size="11">Implementation</text>
                
                <line x1="60" y1="480" x2="100" y2="480" stroke="#000" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrow)"/>
                <text x="110" y="485" font-family="Arial" font-size="11">Dependency</text>
                
                <line x1="60" y1="500" x2="100" y2="500" stroke="#000" stroke-width="1" marker-end="url(#arrow)"/>
                <text x="110" y="505" font-family="Arial" font-size="11">Association</text>
                
                <line x1="60" y1="520" x2="100" y2="520" stroke="#000" stroke-width="1" marker-start="url(#diamond)"/>
                <text x="110" y="525" font-family="Arial" font-size="11">Aggregation</text>
                
                <text x="60" y="550" font-family="Arial" font-size="11" font-style="italic">&lt;&lt;interface&gt;&gt;</text>
                <text x="140" y="555" font-family="Arial" font-size="11">Interface</text>
                
                <text x="60" y="570" font-family="Arial" font-size="11">ClassName</text>
                <text x="140" y="575" font-family="Arial" font-size="11">Class</text>
            </g>
            
        </svg>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
        <h3>Giải thích về thiết kế Service Layer Package:</h3>
        <p><strong>Cấu trúc Package:</strong></p>
        <ul>
            <li><strong>com.musicsocial.service:</strong> Chứa các service interfaces định nghĩa contract cho business logic</li>
            <li><strong>com.musicsocial.service.impl:</strong> Chứa các service implementations thực thi business logic cụ thể</li>
            <li><strong>com.musicsocial.repository:</strong> Chứa các repository interfaces cung cấp truy cập dữ liệu</li>
            <li><strong>com.musicsocial.domain:</strong> Chứa các domain entities - thực thể cốt lõi của hệ thống</li>
            <li><strong>com.musicsocial.mapper:</strong> Chứa các mapper classes chuyển đổi giữa domain và DTO</li>
            <li><strong>com.musicsocial.dto:</strong> Chứa các Data Transfer Objects để truyền tải dữ liệu</li>
        </ul>
        
        <p><strong>Các mối quan hệ:</strong></p>
        <ul>
            <li><strong>Implementation:</strong> Service implementations thực thi các service interfaces</li>
            <li><strong>Dependency:</strong> Service implementations phụ thuộc vào repositories, mappers và các services khác</li>
            <li><strong>Association:</strong> Repositories quản lý domain entities, mappers ánh xạ giữa domain và DTO</li>
            <li><strong>Aggregation:</strong> Domain entities có mối quan hệ sở hữu và chứa đựng với nhau</li>
        </ul>
    </div>
</body>
</html> 